(this["webpackJsonp1755-resas"]=this["webpackJsonp1755-resas"]||[]).push([[0],{179:function(e,t,n){},185:function(e,t,n){},190:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(65),c=n.n(a),s=(n(179),n(8)),o=n.n(s),i=n(11),u=n(24),l=n(13),b=n(138),d=n(22),j=n(23),p=n(240),h=n(235),m=(n(185),n(1)),f=function(){return Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("div",{children:Object(m.jsxs)(p.a,{as:"h3",children:["Retrouvez nous sur :"," "]})}),Object(m.jsxs)("div",{className:"footer__icons",children:[Object(m.jsx)("a",{target:"_blank",href:"fb://profile/196458368600",rel:"noreferrer",children:Object(m.jsx)(j.a,{style:{color:"#3B5998",background:"white",borderRadius:"100%"},size:"3x",icon:b.a,pull:"left"})}),Object(m.jsx)("a",{target:"_blank",href:"https://www.instagram.com/1755baravin/",rel:"noreferrer",children:Object(m.jsx)(j.a,{style:{color:"#3F729B",borderRadius:"100%"},size:"3x",icon:b.b,pull:"right"})})]}),Object(m.jsx)(h.a,{}),Object(m.jsx)("div",{children:Object(m.jsxs)(p.a,{as:"h3",children:["Contactez nous !"," "]})}),Object(m.jsxs)("div",{className:"footer__icons",children:[Object(m.jsx)("a",{href:"mailto:christophemartinetti@baravin1755.com",children:Object(m.jsx)(j.a,{style:{"--fa-primary-color":"black","--fa-secondary-color":"white","--fa-secondary-opacity":.8},size:"3x",icon:d.c,pull:"left"})}),Object(m.jsx)("a",{href:"tel:0609542757",children:Object(m.jsx)(j.a,{style:{"--fa-primary-color":"firebrick","--fa-secondary-color":"black","--fa-primary-opacity":1,"--fa-secondary-opacity":1},size:"3x",icon:d.e,pull:"right"})})]}),Object(m.jsx)(h.a,{}),Object(m.jsxs)("div",{className:"footer__copyright",style:{color:"white"},children:["Copyright \xa9 ",Object(m.jsx)("a",{style:{color:"white"},href:"https://baravin1755.com",children:Object(m.jsx)("span",{children:"Le 1755 \xa0"})}),Object(m.jsx)("span",{children:" ".concat((new Date).getFullYear(),". ")})]}),Object(m.jsx)("div",{className:"footer__alvp",children:Object(m.jsxs)("a",{style:{color:"white",fontSize:"1em"},href:"mailto:pef@alvp-developments.com",children:["Made with",Object(m.jsx)(j.a,{className:"alvp__icon",color:"darkred",icon:d.d,size:"2x"}),"by ALVP-Developments Ajaccio"]})})]})},g=n(67),x=n(223),O=(n(190),function(e){var t=e.user,n=e.loading;return Object(m.jsxs)("div",{className:"topappbar",children:[Object(m.jsx)(g.b,{to:"/",children:Object(m.jsx)("div",{className:"topappbar-image",children:Object(m.jsx)("img",{src:"./images/1755small.png",alt:"logo 1755"})})}),Object(m.jsxs)("div",{className:"topappbar-icons",children:[Object(m.jsx)(g.b,{to:"/login",children:Object(m.jsx)(x.a,{icon:!0,color:t?"green":"grey",circular:!0,disabled:n,loading:n,children:Object(m.jsx)(j.a,{size:"3x",icon:d.i})})}),"isAdmin"===t&&Object(m.jsx)(g.b,{to:"/bookings",children:Object(m.jsx)(x.a,{icon:!0,circular:!0,disabled:n,loading:n,children:Object(m.jsx)(j.a,{size:"3x",icon:d.a})})})]})]})}),k=n(238),v=n(239),y=function(e){var t=e.message;return Object(m.jsx)(k.a,{animation:"jiggle",duration:500,visible:Object.keys(t).length>0,children:Object(m.jsxs)(v.a,{style:{position:"fixed",bottom:25,left:0,right:0,margin:"0 12px",zIndex:"1000",display:Object.keys(t).length>0&&""!==t.message?"flex":"none",border:"3px solid white",borderRadius:"50px",background:t.success?"#56ea65":"#f46161"},children:[Object(m.jsx)(j.a,{icon:t.success?d.b:d.g,color:t.success?"green":"red",size:"2x"}),Object(m.jsx)("span",{style:{display:"inline-block",alignSelf:"center",fontSize:"1.3em",paddingLeft:"12px"},children:t.message})]})})},w=n(98),N=n(47),C=n.n(N),z="https://le-1755.herokuapp.com",B="resas-1755",D=function e(){Object(w.a)(this,e)};D.postAdminRegistrationToken=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C()({method:"post",url:"".concat(z,"/api/bookings/registrationToken"),data:{registrationKey:n},headers:{Authorization:"Bearer "+t}});case 3:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),D.getAllBookings=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C()({method:"get",url:"".concat(z,"/api/bookings/allBookings"),headers:{Authorization:"Bearer "+t}});case 3:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),D.postBooking=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,C()({method:"post",url:"".concat(z,"/api/bookings/createBooking"),data:{booking:t}});case 5:if(!(n=e.sent)){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),D.updateBooking=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,C()({method:"post",url:"".concat(z,"/api/bookings/updateBooking"),data:{update:t},headers:{Authorization:"Bearer "+n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),D.deleteBooking=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,C()({method:"delete",url:"".concat(z,"/api/bookings/deleteBooking"),data:{update:t},headers:{Authorization:"Bearer "+n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),D.getConfig=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C()({method:"get",url:"".concat(z,"/api/config/getConfig")});case 3:if(!(t=e.sent)){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),D.updateConfig=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,C()({method:"post",url:"".concat(z,"/api/config/updateConfig"),data:{update:t},headers:{Authorization:"Bearer "+n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),D.auth=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return n=t.email,r=t.password,e.prev=3,e.next=6,C()({method:"post",url:"".concat(z,"/auth/login"),data:{email:n,password:r}});case 6:if(!(a=e.sent)){e.next=9;break}return e.abrupt("return",a);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();var S=D,F=n(237),A=n(44),E=n(122),I=function(e,t,n){var r={};r[e.target.name]=e.target.value,t(Object(A.a)(Object(A.a)({},n),r))},R=function(e){var t=new Date(e).getDate()-(new Date).getDate();return 0===t?[0,"Aujourd'hui"]:1===t?[1,"Demain"]:t<0?[-1,"Il y \xe0 ".concat(Math.abs(t)," jours")]:t>1?[2,"Dans ".concat(t," jours")]:void 0},T=function(e,t,n){return e.filter((function(e){return t(e.bookingDate)[0]===n}))},V=function(e){var t=e.handleSubmitForm,n=e.credentials,r=e.setCredentials,a=e.loading;return Object(m.jsxs)(F.a,{onSubmit:t,children:[Object(m.jsxs)(F.a.Field,{required:!0,error:!n.email,children:[Object(m.jsx)("label",{htmlFor:"",children:"Email"}),Object(m.jsx)("input",{type:"email",name:"email",value:n.email,onChange:function(e){return I(e,r,n)}})]}),Object(m.jsxs)(F.a.Field,{required:!0,error:!n.password,children:[Object(m.jsx)("label",{htmlFor:"",children:"Mot de passe"}),Object(m.jsx)("input",{type:"password",name:"password",value:n.password,onChange:function(e){return I(e,r,n)}})]}),Object(m.jsx)(F.a.Field,{children:Object(m.jsx)(x.a,{size:"massive",circular:!0,loading:a,disabled:a||!n.email||!n.password,color:"blue",type:"submit",content:"Connexion"})})]})},_=function(e){var t=e.setUser,n=e.setMessage,a=Object(r.useState)({email:"",password:""}),c=Object(u.a)(a,2),s=c[0],l=c[1],b=Object(r.useState)(!1),d=Object(u.a)(b,2),j=d[0],p=d[1],h=function(){var e=Object(i.a)(o.a.mark((function e(r){var a,c,i,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),p(!0),e.next=4,S.auth(s);case 4:(a=e.sent)&&200===a.data.status?(c=a.data,i=c.role,u=c.message,l=c.token,n({success:!0,message:u}),p(!1),localStorage.setItem("token-".concat(B),l),t(i)):(p(!1),n({success:!1,message:a.data.message||"Identifiants incorrects"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"home",children:Object(m.jsx)(V,{handleSubmitForm:h,credentials:s,setCredentials:l,loading:j})})},L=n(59),M=n(100),P=(n(213),function(e){var t=e.bookerName,n=e.bookerNumber,r=e.bookingDate,a=e.bookingTime,c=e.bookingValidatedByAdmin;return Object(m.jsxs)("div",{className:"booking",style:{border:c?"3px solid green":!1===c?"3px solid pink":""},children:[Object(m.jsx)(M.a,{color:c?"green":!1===c?"pink":"blue",ribbon:!0,children:Object(m.jsx)("span",{className:"booking-ribbon ".concat(null===c&&"animate"),children:c?"Accept\xe9e":!1===c?"Refus\xe9e":"New !"})}),Object(m.jsx)("h2",{className:"booking-title",children:t}),Object(m.jsxs)("p",{className:"booking-date",children:[Object(m.jsxs)("span",{children:[R(r)[1],", Le "]}),Object(m.jsx)("span",{children:new Date(r).toLocaleString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),Object(m.jsxs)("p",{children:[" \xe0 ",a]})]}),Object(m.jsxs)("p",{className:"booking-number",children:["Pour : ",Object(m.jsx)("span",{children:n})," personnes"]})]})}),q=Object(r.memo)(P),J=(n(214),function(e){var t=e.booking,n=e.handleValidateBooking,r=e.handleDeleteBooking;return Object(m.jsxs)("div",{className:"bookingcontrols",children:[null===t.bookingValidatedByAdmin&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x.a,{icon:!0,color:"green",size:"big",circular:!0,onClick:function(){return n(t,!0)},children:Object(m.jsx)(j.a,{fixedWidth:!0,size:"2x",color:"white",icon:d.b})}),Object(m.jsx)(x.a,{icon:!0,size:"big",color:"pink",circular:!0,onClick:function(){return n(t,!1)},children:Object(m.jsx)(j.a,{fixedWidth:!0,size:"2x",color:"white",icon:d.g})})]}),null!==t.bookingValidatedByAdmin&&Object(m.jsx)(x.a,{icon:!0,color:"red",size:"massive",circular:!0,onClick:function(){return r(t)},children:Object(m.jsx)(j.a,{icon:d.h})})]})}),H=Object(r.memo)(J),W=(n(215),function(e){var t=e.setFilter,n=e.bookings;return Object(m.jsxs)("div",{className:"filterbuttons",children:[Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(x.a,{className:"filterbuttons-button",size:"massive",circular:!0,color:"red",content:"Jours Pr\xe9c\xe9dents",onClick:function(){t(-1)}}),Object(m.jsx)(M.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:T(n,R,-1).length})]}),Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(x.a,{className:"filterbuttons-button",size:"massive",circular:!0,color:"green",content:"Aujourd'hui",onClick:function(){t(0)}}),Object(m.jsx)(M.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:T(n,R,0).length})]}),Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(x.a,{className:"filterbuttons-button",size:"massive",circular:!0,color:"purple",content:"Demain",onClick:function(){t(1)}}),Object(m.jsx)(M.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:T(n,R,1).length})]}),Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(x.a,{className:"filterbuttons-button",circular:!0,size:"massive",color:"yellow",content:"Jours Suivants",onClick:function(){return t(2)}}),Object(m.jsx)(M.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:T(n,R,2).length})]})]})}),K=n(46),U=n(58),Y=(n(216),function(){return Object(m.jsx)("div",{className:"nobookings",children:Object(m.jsx)("p",{children:"D\xe9sol\xe9 , Il n'y a pas de reservations pour le moment :-("})})});function G(){return(G=Object(i.a)(o.a.mark((function e(t,n,r,a){var c,s,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.next=3,S.getAllBookings(a);case 3:(c=e.sent)&&200===c.data.status?(s=c.data,i=s.bookings,u=s.message,i.sort((function(e,t){return new Date(e.bookingDate)-new Date(t.bookingDate)})).sort((function(e,t){return(null===t.bookingValidatedByAdmin)-(null===e.bookingValidatedByAdmin)})),n(Object(L.a)(i)),t(!1),r({success:!0,message:u})):(t(!1),r({success:!1,message:"Il y a eu un probl\xe9me"}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.postAdminRegistrationToken(t,n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(e){var t=e.setMessage,n=e.bookings,a=e.setBookings,c=Object(r.useState)(!1),s=Object(u.a)(c,2),l=s[0],b=s[1],d=Object(r.useState)(0),j=Object(u.a)(d,2),p=j[0],f=j[1];Object(r.useEffect)((function(){if("android"===U.a.getPlatform()||"ios"===U.a.getPlatform()){var e=localStorage.getItem("token-".concat(B)),t=Object(E.a)(e).user;K.a.requestPermissions().then((function(e){"granted"===e.receive&&K.a.register()})),K.a.addListener("registration",(function(n){t.registrationKey!==n.value&&function(e,t){Q.apply(this,arguments)}(e,n)})),K.a.addListener("registrationError",(function(e){})),K.a.removeAllDeliveredNotifications()}}),[]),Object(r.useEffect)((function(){var e=localStorage.getItem("token-".concat(B));!function(e,t,n,r){G.apply(this,arguments)}(b,a,t,e)}),[]);var g=function(){var e=Object(i.a)(o.a.mark((function e(r,c){var s,i,u,l,d,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),s=localStorage.getItem("token-".concat(B)),r.bookingValidatedByAdmin=c,e.next=5,S.updateBooking(r,s);case 5:(i=e.sent)&&200===i.data.status?(u=i.data,l=u.updatedBooking,d=u.message,j=n.findIndex((function(e){return e._id===r._id})),n.splice(j,1),a([].concat(Object(L.a)(n),[l])),b(!1),t({success:!0,message:d})):(b(!1),t({success:!1,message:"Il y \xe0 eu un probl\xe8me"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(o.a.mark((function e(r){var c,s,i,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),c=localStorage.getItem("token-".concat(B)),e.next=4,S.deleteBooking(r,c);case 4:(s=e.sent)&&200===s.data.status?(i=s.data,u=i.deletedBooking,l=i.message,d=n.findIndex((function(e){return e._id===u._id})),n.splice(d,1),a(Object(L.a)(n)),b(!1),t({success:!0,message:l})):(b(!1),t({success:!1,message:"Il y \xe0 eu un probl\xe8me"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)(W,{setFilter:f,bookings:n,filter:p}),n.length>0&&T(n,R,p).map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H,{booking:e,loading:l,handleValidateBooking:g,handleDeleteBooking:x}),Object(m.jsx)(q,Object(A.a)(Object(A.a)({},e),{},{loading:l})),Object(m.jsx)(h.a,{})]})})),0===T(n,R,p).length&&Object(m.jsx)(Y,{})]})},Z=Object(r.memo)(X),$=n(242),ee=function(e){var t=e.resaOpen,n=e.handleChangeResaOpen;return Object(m.jsx)($.a,{type:"checkbox",toggle:!0,checked:t,onChange:function(){return n()},label:t?"Reservations activ\xe9es":"R\xe9servations desactiv\xe9es"})},te=n(71),ne=function(e){var t=e.handleEmptyForm;return Object(m.jsxs)(x.a,{size:"massive",circular:!0,color:"blue",icon:!0,type:"button",labelPosition:"left",onClick:function(){return t()},children:[Object(m.jsx)(te.a,{children:Object(m.jsx)(j.a,{style:{marginTop:"5px"},size:"2x",icon:d.f})}),"Recharger"]})},re=n(236),ae=function(e){var t=e.handleSubmit,n=e.booking,r=e.setBooking,a=e.loading;return Object(m.jsxs)(F.a,{onSubmit:t,children:[Object(m.jsxs)(F.a.Field,{required:!0,error:!n.bookerName,children:[Object(m.jsx)("label",{htmlFor:"bookerName",children:"Votre nom"}),Object(m.jsx)("input",{id:"bookerName",name:"bookerName",value:n.bookerName,autoComplete:"name",placeholder:"Votre nom et pr\xe9nom",type:"text",onChange:function(e){return I(e,r,n)}})]}),Object(m.jsxs)(F.a.Field,{required:!0,error:!n.bookerEmail,children:[Object(m.jsx)("label",{htmlFor:"bookerEmail",children:"Votre Email"}),Object(m.jsx)("input",{id:"bookerEmail",name:"bookerEmail",value:n.bookerEmail,autoComplete:"email",type:"email",placeholder:"Votre email : toto@toto.fr ...",onChange:function(e){return I(e,r,n)}})]}),Object(m.jsxs)(F.a.Field,{required:!0,error:!n.bookerNumber,children:[Object(m.jsx)("label",{htmlFor:"bookerNumber",children:"Nombre de personnes"}),Object(m.jsx)("input",{id:"bookerNumber",name:"bookerNumber",value:n.bookerNumber,min:1,step:1,placeholder:"Votre nombre : 5...",type:"number",onChange:function(e){return I(e,r,n)}})]}),Object(m.jsxs)(F.a.Field,{required:!0,error:!n.bookingDate,children:[Object(m.jsx)("label",{htmlFor:"bookingDate",children:"Date de votre reservation"}),Object(m.jsx)(re.a,{id:"bookingDate",name:"bookingDate",value:n.bookingDate,placeholder:"La date de votre r\xe9servation",type:"date",onChange:function(e){return I(e,r,n)}})]}),Object(m.jsxs)(F.a.Field,{required:!0,error:!n.bookingTime,children:[Object(m.jsx)("label",{htmlFor:"bookingTime",children:"Heure de votre reservation"}),Object(m.jsx)("span",{style:{color:"white",textAlign:"center",fontSize:"1.3em",fontWeight:"bold"},children:"Minimum 18h00"}),Object(m.jsx)(re.a,{id:"bookingTime",name:"bookingTime",value:n.bookingTime,placeholder:"L'Heure de votre r\xe9servation",min:"0",type:"time",onChange:function(e){return I(e,r,n)}})]}),Object(m.jsx)(F.a.Field,{children:Object(m.jsx)(x.a,{circular:!0,size:"massive",loading:a,disabled:a||!n.bookerName||!n.bookerNumber||!n.bookerEmail||!n.bookingDate||!n.bookingTime,color:"blue",type:"submit",content:"Je Reserve !"})})]})},ce=(n(217),function(e){var t=e.success,n=e.error;return Object(m.jsx)(p.a,{className:"homeheader",as:"h1",style:{background:t?"green":n?"red":"grey"},children:t||n?t?"Votre r\xe9servation \xe0 \xe9t\xe9 effectu\xe9e avec succ\xe9s , vous allez recevoir un mail de confirmation":n?"Votre r\xe9servation \xe0 \xe9chou\xe9e, veuillez recommencer":"Reservez Votre table Maintenant !":"Reservez Votre table Maintenant !"})}),se=(n(218),function(e){var t=e.loading;return Object(m.jsx)("div",{className:"homemadeloader",children:t&&Object(m.jsx)("div",{className:"nobookings homemadeloader-loader",children:Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{children:"C"}),Object(m.jsx)("span",{children:"H"}),Object(m.jsx)("span",{children:"A"}),Object(m.jsx)("span",{children:"R"}),Object(m.jsx)("span",{children:"G"}),Object(m.jsx)("span",{children:"E"}),Object(m.jsx)("span",{children:"M"}),Object(m.jsx)("span",{children:"E"}),Object(m.jsx)("span",{children:"N"}),Object(m.jsx)("span",{children:"T"}),Object(m.jsx)("span",{children:"."}),Object(m.jsx)("span",{children:" "}),Object(m.jsx)("span",{children:"."}),Object(m.jsx)("span",{children:" "}),Object(m.jsx)("span",{children:"."}),Object(m.jsx)("span",{children:" "})]})})})}),oe=(n(219),function(e){var t=e.user,n=e.setMessage,a=e.resaOpen,c=e.config,s=e.setConfig,l=Object(r.useState)({bookerName:"",bookerNumber:"",bookingDate:"",bookingTime:"",bookerEmail:""}),b=Object(u.a)(l,2),d=b[0],j=b[1],h=Object(r.useState)(!1),f=Object(u.a)(h,2),g=f[0],x=f[1],O=Object(r.useState)(!1),v=Object(u.a)(O,2),y=v[0],w=v[1],N=Object(r.useState)(!1),C=Object(u.a)(N,2),z=C[0],D=C[1];Object(r.useEffect)((function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();j(Object(A.a)(Object(A.a)({},d),{},{bookingDate:"".concat(r,"-0").concat(n,"-").concat(t),bookingTime:"18:00"}))}),[]);var F=function(){var e=Object(i.a)(o.a.mark((function e(){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),t={_id:c._id,resaOpen:!c.resaOpen},r=localStorage.getItem("token-".concat(B)),e.next=5,S.updateConfig(t,r);case 5:(a=e.sent)&&200===a.data.status?(s(a.data.updatedConfig),n({success:!0,message:a.data.message}),x(!1)):(n({success:!1,message:a.data.message||"il y a eu un probl\xe8me"}),x(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(!0),e.next=4,S.postBooking(d);case 4:(r=e.sent)&&200===r.data.status?(x(!1),n({success:!0,message:r.data.message}),D(!1),w(!0)):(x(!1),n({success:!1,message:"il y eu un probl\xe9me lors de votre r\xe9servation veuillez reessayer"}),D(!0),w(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"home",children:["isAdmin"===t&&Object(m.jsx)(ee,{resaOpen:a,handleChangeResaOpen:F}),Object(m.jsx)(se,{loading:g}),!g&&a?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ce,{success:y,error:z}),!y&&!z&&a&&Object(m.jsx)(k.a,{animation:"fade down",duration:300,visible:!y||!z,children:Object(m.jsx)(ae,{handleSubmit:E,setBooking:j,booking:d,loading:g})}),(z||y)&&Object(m.jsx)(ne,{handleEmptyForm:function(){j({bookerName:"",bookerNumber:"",bookingDate:"",bookingTime:"",bookerEmail:""}),w(!1),D(!1),x(!1)}})]}):!g&&Object(m.jsx)(p.a,{as:"h1",className:"homeheader",children:"Les r\xe9servations sont d\xe9sactiv\xe9es pour le moment , revenez demain !"})]})}),ie=(n(220),function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({}),s=Object(u.a)(c,2),b=s[0],d=s[1],j=Object(r.useState)({}),p=Object(u.a)(j,2),g=p[0],x=p[1],k=Object(r.useState)(!1),v=Object(u.a)(k,2),w=v[0],N=v[1],C=Object(r.useState)([]),z=Object(u.a)(C,2),D=z[0],F=z[1];return Object(r.useEffect)((function(){0!==Object.keys(b).length&&setTimeout((function(){d({})}),3e3)}),[b]),Object(r.useEffect)((function(){var e=localStorage.getItem("token-".concat(B));function t(){return(t=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,S.getConfig();case 3:(t=e.sent)&&200===t.data.status?(x(t.data.config),N(!1)):(N(!1),d({success:!1,message:t.data.message||"Impossible de r\xe9cup\xe9rer la configuration, contacter l'administrateur"}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e&&function(e,t){if(e){var n=Object(E.a)(e),r=n.user,a=n.exp,c=r.role;return!(Date.now()>1e3*a)&&(t(c),!0)}return!1}(e,a)?d({success:!0,message:"Re-Conn\xe9ct\xe9"}):localStorage.removeItem("token-".concat(B)),function(){t.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){"android"!==U.a.getPlatform()&&"ios"!==U.a.getPlatform()||(K.a.addListener("pushNotificationReceived",(function(e){})),K.a.addListener("pushNotificationActionPerformed",(function(e){})))}),[]),Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)(O,{user:n,loading:w}),Object(m.jsx)(h.a,{}),Object(m.jsx)(y,{message:b}),Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{exact:!0,path:"/",children:Object(m.jsx)(oe,{user:n,message:b,setMessage:d,resaOpen:g.resaOpen,config:g,setConfig:x})}),Object(m.jsx)(l.b,{path:"/login",children:n?Object(m.jsx)(l.a,{to:"/bookings"}):Object(m.jsx)(_,{setUser:a,setMessage:d})}),Object(m.jsx)(l.b,{path:"/bookings",children:n?Object(m.jsx)(Z,{setMessage:d,bookings:D,setBookings:F}):Object(m.jsx)(l.a,{to:"/login"})})]}),Object(m.jsx)(h.a,{}),Object(m.jsx)(f,{})]})}),ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,243)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};n(221);c.a.render(Object(m.jsx)(g.a,{basename:"/",children:Object(m.jsx)(ie,{})}),document.getElementById("root")),ue()}},[[222,1,2]]]);
//# sourceMappingURL=main.bcc8d252.chunk.js.map