(this["webpackJsonp1755-resas"]=this["webpackJsonp1755-resas"]||[]).push([[0],{186:function(e,t,n){},191:function(e,t,n){},196:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(66),s=n.n(a),o=(n(186),n(10)),c=n.n(o),i=n(20),l=n(24),u=n(13),b=n(140),d=n(16),j=n(17),p=n(246),h=n(241),m=(n(191),n(1)),x=function(){return Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("div",{children:Object(m.jsxs)(p.a,{as:"h3",children:["Retrouvez nous sur :"," "]})}),Object(m.jsxs)("div",{className:"footer__icons",children:[Object(m.jsx)("a",{target:"_blank",href:"fb://profile/196458368600",rel:"noreferrer",children:Object(m.jsx)(j.a,{style:{color:"#3B5998",background:"white",borderRadius:"100%"},size:"3x",icon:b.a,pull:"left"})}),Object(m.jsx)("a",{target:"_blank",href:"https://www.instagram.com/1755baravin/",rel:"noreferrer",children:Object(m.jsx)(j.a,{style:{color:"#3F729B",borderRadius:"100%"},size:"3x",icon:b.b,pull:"right"})})]}),Object(m.jsx)(h.a,{}),Object(m.jsx)("div",{children:Object(m.jsxs)(p.a,{as:"h3",children:["Contactez nous !"," "]})}),Object(m.jsxs)("div",{className:"footer__icons",children:[Object(m.jsx)("a",{href:"mailto:christophemartinetti@baravin1755.com",children:Object(m.jsx)(j.a,{style:{"--fa-primary-color":"black","--fa-secondary-color":"white","--fa-secondary-opacity":.8},size:"3x",icon:d.c,pull:"left"})}),Object(m.jsx)("a",{href:"tel:0609542757",children:Object(m.jsx)(j.a,{style:{"--fa-primary-color":"firebrick","--fa-secondary-color":"black","--fa-primary-opacity":1,"--fa-secondary-opacity":1},size:"3x",icon:d.e,pull:"right"})})]}),Object(m.jsx)(h.a,{}),Object(m.jsxs)("div",{className:"footer__copyright",style:{color:"white"},children:["Copyright \xa9 ",Object(m.jsx)("a",{style:{color:"white"},href:"https://baravin1755.com",children:Object(m.jsx)("span",{children:"Le 1755 \xa0"})}),Object(m.jsx)("span",{children:" ".concat((new Date).getFullYear(),". ")})]}),Object(m.jsx)("div",{className:"footer__alvp",children:Object(m.jsxs)("a",{style:{color:"white",fontSize:"1em"},href:"mailto:pef@alvp-developments.com",children:["Made with",Object(m.jsx)(j.a,{className:"alvp__icon",color:"darkred",icon:d.d,size:"2x"}),"by ALVP-Developments Ajaccio"]})})]})},f=n(68),g=n(229),O=n(46),k=n(124),v="https://le-1755.herokuapp.com",y="resas-1755",w=function(e,t,n){var r={};r[e.target.name]=e.target.value,t(Object(O.a)(Object(O.a)({},n),r))},N=function(e){var t=Math.round((new Date(e)-new Date)/864e5)+1;return 0===t?[0,"Aujourd'hui"]:1===t?[1,"Demain"]:t<0?[-1,"Il y \xe0 ".concat(Math.abs(t)," jours")]:t>1?[2,"Dans ".concat(t," jours")]:void 0},C=function(e,t,n){return e.filter((function(e){return t(e.bookingDate)[0]===n}))},z=function(e,t){localStorage.removeItem("token-".concat(y)),e(""),t({success:!0,message:"D\xe9connexion r\xe9ussie"})},B=(n(196),function(e){var t=e.user,n=e.loading,r=e.setUser,a=e.setMessage;return Object(m.jsxs)("div",{className:"topappbar",children:[Object(m.jsx)(f.b,{to:"/",children:Object(m.jsx)("div",{className:"topappbar-image",children:Object(m.jsx)("img",{src:"./images/1755small.png",alt:"logo 1755"})})}),Object(m.jsxs)("div",{className:"topappbar-icons",children:[t?Object(m.jsx)(g.a,{icon:!0,color:"red",circular:!0,basic:!0,disabled:n,loading:n,onClick:function(){return z(r,a)},children:Object(m.jsx)(j.a,{size:"3x",icon:d.j})}):Object(m.jsx)(f.b,{to:"/login",children:Object(m.jsx)(g.a,{icon:!0,color:t?"green":"grey",circular:!0,basic:!0,disabled:n,loading:n,children:Object(m.jsx)(j.a,{size:"3x",icon:d.j})})}),"isAdmin"===t&&Object(m.jsx)(f.b,{to:"/bookings",children:Object(m.jsx)(g.a,{icon:!0,circular:!0,disabled:n,loading:n,children:Object(m.jsx)(j.a,{size:"3x",icon:d.a})})})]})]})}),D=n(244),F=n(245),S=function(e){var t=e.message;return Object(m.jsx)(D.a,{animation:"jiggle",duration:500,visible:Object.keys(t).length>0,children:Object(m.jsxs)(F.a,{style:{position:"fixed",bottom:25,left:0,right:0,margin:"0 12px",zIndex:"1000",display:Object.keys(t).length>0&&""!==t.message?"flex":"none",border:"3px solid white",borderRadius:"50px",background:t.success?"#56ea65":"#f46161"},children:[Object(m.jsx)(j.a,{icon:t.success?d.b:d.h,color:t.success?"green":"red",size:"2x"}),Object(m.jsx)("span",{style:{display:"inline-block",alignSelf:"center",fontSize:"1.3em",paddingLeft:"12px"},children:t.message})]})})},A=n(166),T=n(49),_=n.n(T),E=function e(){Object(A.a)(this,e)};E.postAdminRegistrationToken=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_()({method:"post",url:"".concat(v,"/api/bookings/registrationToken"),data:{registrationKey:n},headers:{Authorization:"Bearer "+t}});case 3:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),E.getAllBookings=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_()({method:"get",url:"".concat(v,"/api/bookings/allBookings"),headers:{Authorization:"Bearer "+t}});case 3:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),E.postBooking=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,_()({method:"post",url:"".concat(v,"/api/bookings/createBooking"),data:{booking:t,pushNotificationToken:n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E.updateBooking=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,_()({method:"post",url:"".concat(v,"/api/bookings/updateBooking"),data:{update:t},headers:{Authorization:"Bearer "+n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E.deleteBooking=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,_()({method:"delete",url:"".concat(v,"/api/bookings/deleteBooking"),data:{update:t},headers:{Authorization:"Bearer "+n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E.getConfig=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_()({method:"get",url:"".concat(v,"/api/config/getConfig")});case 3:if(!(t=e.sent)){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),E.updateConfig=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,_()({method:"post",url:"".concat(v,"/api/config/updateConfig"),data:{update:t},headers:{Authorization:"Bearer "+n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E.auth=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return n=t.email,r=t.password,e.prev=3,e.next=6,_()({method:"post",url:"".concat(v,"/auth/login"),data:{email:n,password:r}});case 6:if(!(a=e.sent)){e.next=9;break}return e.abrupt("return",a);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();var P=E,R=n(243),I=function(e){var t=e.handleSubmitForm,n=e.credentials,r=e.setCredentials,a=e.loading;return Object(m.jsxs)(R.a,{onSubmit:t,children:[Object(m.jsxs)(R.a.Field,{required:!0,error:!n.email,children:[Object(m.jsx)("label",{htmlFor:"",children:"Email"}),Object(m.jsx)("input",{type:"email",name:"email",value:n.email,onChange:function(e){return w(e,r,n)}})]}),Object(m.jsxs)(R.a.Field,{required:!0,error:!n.password,children:[Object(m.jsx)("label",{htmlFor:"",children:"Mot de passe"}),Object(m.jsx)("input",{type:"password",name:"password",value:n.password,onChange:function(e){return w(e,r,n)}})]}),Object(m.jsx)(R.a.Field,{children:Object(m.jsx)(g.a,{size:"massive",circular:!0,loading:a,disabled:a||!n.email||!n.password,color:"blue",type:"submit",content:"Connexion"})})]})},M=function(e){var t=e.setUser,n=e.setMessage,a=Object(r.useState)({email:"",password:""}),s=Object(l.a)(a,2),o=s[0],u=s[1],b=Object(r.useState)(!1),d=Object(l.a)(b,2),j=d[0],p=d[1],h=function(){var e=Object(i.a)(c.a.mark((function e(r){var a,s,i,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),p(!0),e.next=4,P.auth(o);case 4:(a=e.sent)&&200===a.data.status?(s=a.data,i=s.role,l=s.message,u=s.token,n({success:!0,message:l}),p(!1),localStorage.setItem("token-".concat(y),u),t(i)):(p(!1),n({success:!1,message:"Identifiants incorrects"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"home",children:Object(m.jsx)(I,{handleSubmitForm:h,credentials:o,setCredentials:u,loading:j})})},V=n(144),L=n(101),q=(n(219),function(e){var t=e.bookerName,n=e.bookerEmail,r=e.bookerNumber,a=e.bookerPhoneNumber,s=e.bookingDate,o=e.bookingTime,c=e.bookingValidatedByAdmin;return Object(m.jsxs)("div",{className:"booking",style:{border:c?"3px solid green":!1===c?"3px solid pink":""},children:[Object(m.jsx)(L.a,{color:c?"green":!1===c?"pink":"blue",ribbon:!0,children:Object(m.jsx)("span",{className:"booking-ribbon ".concat(null===c&&"animate"),children:c?"Accept\xe9e":!1===c?"Refus\xe9e":"New !"})}),Object(m.jsxs)("h2",{className:"booking-title",children:[t," ",a&&Object(m.jsx)("a",{style:{display:"inline-block",margin:"0 5px"},href:"tel: ".concat(a),children:Object(m.jsx)("span",{children:Object(m.jsx)(j.a,{size:"2x",color:"white",icon:d.f})})}),Object(m.jsx)("a",{style:{display:"inline-block",margin:"0 5px"},href:"mailto: ".concat(n),children:Object(m.jsx)("span",{children:Object(m.jsx)(j.a,{size:"2x",color:"white",icon:d.c})})})]}),Object(m.jsxs)("p",{className:"booking-date",children:[Object(m.jsxs)("span",{children:[N(s)[1],", Le "]}),Object(m.jsx)("span",{children:new Date(s).toLocaleString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),Object(m.jsxs)("p",{children:[" \xe0 ",o]})]}),Object(m.jsxs)("p",{className:"booking-number",children:["Pour : ",Object(m.jsx)("span",{children:r})," personnes"]})]})}),J=Object(r.memo)(q),U=(n(220),function(e){var t=e.booking,n=e.handleValidateBooking,r=e.handleDeleteBooking;return Object(m.jsxs)("div",{className:"bookingcontrols",children:[null===t.bookingValidatedByAdmin&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g.a,{icon:!0,color:"green",size:"big",circular:!0,onClick:function(){return n(t,!0)},children:Object(m.jsx)(j.a,{fixedWidth:!0,size:"2x",color:"white",icon:d.b})}),Object(m.jsx)(g.a,{icon:!0,size:"big",color:"pink",circular:!0,onClick:function(){return n(t,!1)},children:Object(m.jsx)(j.a,{fixedWidth:!0,size:"2x",color:"white",icon:d.h})})]}),null!==t.bookingValidatedByAdmin&&Object(m.jsx)(g.a,{icon:!0,color:"red",size:"massive",circular:!0,onClick:function(){return r(t)},children:Object(m.jsx)(j.a,{icon:d.i})})]})}),W=Object(r.memo)(U),H=(n(221),function(e){var t=e.setFilter,n=e.bookings;return Object(m.jsxs)("div",{className:"filterbuttons",children:[Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(g.a,{className:"filterbuttons-button",size:"massive",circular:!0,color:"red",content:"Jours Pr\xe9c\xe9dents",onClick:function(){t(-1)}}),Object(m.jsx)(L.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:C(n,N,-1).length})]}),Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(g.a,{className:"filterbuttons-button",size:"massive",circular:!0,color:"green",content:"Aujourd'hui",onClick:function(){t(0)}}),Object(m.jsx)(L.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:C(n,N,0).length})]}),Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(g.a,{className:"filterbuttons-button",size:"massive",circular:!0,color:"purple",content:"Demain",onClick:function(){t(1)}}),Object(m.jsx)(L.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:C(n,N,1).length})]}),Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(g.a,{className:"filterbuttons-button",circular:!0,size:"massive",color:"yellow",content:"Jours Suivants",onClick:function(){return t(2)}}),Object(m.jsx)(L.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:C(n,N,2).length})]})]})}),K=n(48),G=n(82),Y=(n(222),function(){return Object(m.jsx)("div",{className:"nobookings",children:Object(m.jsx)("p",{children:"D\xe9sol\xe9 , Il n'y a pas de reservations pour le moment :-("})})}),Q=n(12),X=n.n(Q),Z=n(100),$=n(35);function ee(){return(ee=Object($.a)(X.a.mark((function e(t,n,r,a){var s,o,c,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.next=3,P.getAllBookings(a);case 3:(s=e.sent)&&200===s.data.status?(o=s.data,c=o.bookings,i=o.message,c.sort((function(e,t){return new Date(e.bookingDate)-new Date(t.bookingDate)})).sort((function(e,t){return(null===t.bookingValidatedByAdmin)-(null===e.bookingValidatedByAdmin)})),n(Object(Z.a)(c)),t(!1),r({success:!0,message:i})):(t(!1),r({success:!1,message:"Il y a eu un probl\xe9me"}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object($.a)(X.a.mark((function e(t,n){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.postAdminRegistrationToken(t,n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=function(e){var t=e.setMessage,n=e.bookings,a=e.setBookings,s=e.pushNotificationToken,o=Object(r.useState)(!1),u=Object(l.a)(o,2),b=u[0],d=u[1],j=Object(r.useState)(0),p=Object(l.a)(j,2),x=p[0],f=p[1];Object(r.useEffect)((function(){var e=localStorage.getItem("token-".concat(y));if(G.a.isNativePlatform()){var n=Object(k.a)(e).user;s&&n.registrationKey!==s&&function(e,t){te.apply(this,arguments)}(e,s),K.a.removeAllDeliveredNotifications()}!function(e,t,n,r){ee.apply(this,arguments)}(d,a,t,e)}),[]);var g=function(){var e=Object(i.a)(c.a.mark((function e(r,s){var o,i,l,u,b,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),o=localStorage.getItem("token-".concat(y)),r.bookingValidatedByAdmin=s,e.next=5,P.updateBooking(r,o);case 5:(i=e.sent)&&200===i.data.status?(l=i.data,u=l.updatedBooking,b=l.message,j=n.findIndex((function(e){return e._id===r._id})),n.splice(j,1),a([].concat(Object(V.a)(n),[u])),d(!1),t({success:!0,message:b})):(d(!1),t({success:!1,message:"Il y \xe0 eu un probl\xe8me"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(c.a.mark((function e(r){var s,o,i,l,u,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),s=localStorage.getItem("token-".concat(y)),e.next=4,P.deleteBooking(r,s);case 4:(o=e.sent)&&200===o.data.status?(i=o.data,l=i.deletedBooking,u=i.message,b=n.findIndex((function(e){return e._id===l._id})),n.splice(b,1),a(Object(V.a)(n)),d(!1),t({success:!0,message:u})):(d(!1),t({success:!1,message:"Il y \xe0 eu un probl\xe8me"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)(H,{setFilter:f,bookings:n,filter:x}),n.length>0&&C(n,N,x).map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(W,{booking:e,loading:b,handleValidateBooking:g,handleDeleteBooking:v}),Object(m.jsx)(J,Object(O.a)(Object(O.a)({},e),{},{loading:b})),Object(m.jsx)(h.a,{})]})})),0===C(n,N,x).length&&Object(m.jsx)(Y,{})]})},re=Object(r.memo)(ne),ae=n(248),se=function(e){var t=e.resaOpen,n=e.handleChangeResaOpen;return Object(m.jsx)(ae.a,{type:"checkbox",toggle:!0,checked:t,onChange:function(){return n()},label:t?"Reservations activ\xe9es":"R\xe9servations desactiv\xe9es"})},oe=n(72),ce=function(e){var t=e.handleEmptyForm;return Object(m.jsxs)(g.a,{size:"massive",circular:!0,color:"blue",icon:!0,type:"button",labelPosition:"left",onClick:function(){return t()},children:[Object(m.jsx)(oe.a,{children:Object(m.jsx)(j.a,{style:{marginTop:"5px"},size:"2x",icon:d.g})}),"Recharger"]})},ie=n(242),le=function(e){var t=e.handleSubmit,n=e.booking,r=e.setBooking,a=e.loading;return Object(m.jsxs)(R.a,{onSubmit:t,children:[Object(m.jsxs)(R.a.Field,{required:!0,error:!n.bookerName,children:[Object(m.jsx)("label",{htmlFor:"bookerName",children:"Votre nom"}),Object(m.jsx)("input",{id:"bookerName",name:"bookerName",value:n.bookerName,autoComplete:"name",placeholder:"Votre nom et pr\xe9nom",type:"text",onChange:function(e){return w(e,r,n)}})]}),Object(m.jsxs)(R.a.Field,{required:!0,error:!n.bookerEmail,children:[Object(m.jsx)("label",{htmlFor:"bookerEmail",children:"Votre Email"}),Object(m.jsx)("input",{id:"bookerEmail",name:"bookerEmail",value:n.bookerEmail,autoComplete:"email",type:"email",placeholder:"Votre email : toto@toto.fr ...",onChange:function(e){return w(e,r,n)}})]}),Object(m.jsxs)(R.a.Field,{required:!0,error:!n.bookerPhoneNumber,children:[Object(m.jsx)("label",{htmlFor:"bookerPhoneNumber",children:"Num\xe9ro de t\xe9l\xe9phone"}),Object(m.jsx)("input",{id:"bookerPhoneNumber",name:"bookerPhoneNumber",value:n.bookerPhoneNumber,autoComplete:"tel",type:"text",placeholder:"06 ... ... ...",onChange:function(e){return w(e,r,n)}})]}),Object(m.jsxs)(R.a.Field,{required:!0,error:!n.bookerNumber,children:[Object(m.jsx)("label",{htmlFor:"bookerNumber",children:"Nombre de personnes"}),Object(m.jsx)("input",{id:"bookerNumber",name:"bookerNumber",value:n.bookerNumber,min:1,step:1,placeholder:"Votre nombre : 5...",type:"number",onChange:function(e){return w(e,r,n)}})]}),Object(m.jsxs)(R.a.Field,{required:!0,error:!n.bookingDate,children:[Object(m.jsx)("label",{htmlFor:"bookingDate",children:"Date de votre reservation"}),Object(m.jsx)(ie.a,{id:"bookingDate",name:"bookingDate",value:n.bookingDate,placeholder:"La date de votre r\xe9servation",type:"date",onChange:function(e){return w(e,r,n)}})]}),Object(m.jsxs)(R.a.Field,{required:!0,error:!n.bookingTime,children:[Object(m.jsx)("label",{htmlFor:"bookingTime",children:"Heure de votre reservation"}),Object(m.jsx)("span",{style:{color:"white",textAlign:"center",fontSize:"1.3em",fontWeight:"bold"},children:"Minimum 18h00"}),Object(m.jsx)(ie.a,{id:"bookingTime",name:"bookingTime",value:n.bookingTime,placeholder:"L'Heure de votre r\xe9servation",min:"0",type:"time",onChange:function(e){return w(e,r,n)}})]}),Object(m.jsx)(R.a.Field,{children:Object(m.jsx)(g.a,{circular:!0,size:"massive",loading:a,disabled:a||!n.bookerName||!n.bookerNumber||!n.bookerEmail||!n.bookingDate||!n.bookerPhoneNumber||!n.bookingTime,color:"blue",type:"submit",content:"Je Reserve !"})})]})},ue=(n(223),function(e){var t=e.success,n=e.error;return Object(m.jsx)(p.a,{className:"homeheader",as:"h1",style:{background:t?"green":n?"red":"grey"},children:t||n?t?"Votre r\xe9servation \xe0 \xe9t\xe9 effectu\xe9e avec succ\xe9s , vous allez recevoir un mail de confirmation":n?"Votre r\xe9servation \xe0 \xe9chou\xe9e, veuillez recommencer":"Reservez Votre table Maintenant":"Reservez Votre table Maintenant"})}),be=(n(224),function(e){var t=e.loading;return Object(m.jsx)("div",{className:"homemadeloader",children:t&&Object(m.jsx)("div",{className:"nobookings homemadeloader-loader",children:Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{children:"C"}),Object(m.jsx)("span",{children:"H"}),Object(m.jsx)("span",{children:"A"}),Object(m.jsx)("span",{children:"R"}),Object(m.jsx)("span",{children:"G"}),Object(m.jsx)("span",{children:"E"}),Object(m.jsx)("span",{children:"M"}),Object(m.jsx)("span",{children:"E"}),Object(m.jsx)("span",{children:"N"}),Object(m.jsx)("span",{children:"T"}),Object(m.jsx)("span",{children:"."}),Object(m.jsx)("span",{children:" "}),Object(m.jsx)("span",{children:"."}),Object(m.jsx)("span",{children:" "}),Object(m.jsx)("span",{children:"."}),Object(m.jsx)("span",{children:" "})]})})})}),de=(n(225),function(e){var t=e.user,n=e.setMessage,a=e.resaOpen,s=e.config,o=e.setConfig,u=e.pushNotificationToken,b=Object(r.useState)({bookerName:"",bookerNumber:"",bookerPhoneNumber:"",bookingDate:"",bookingTime:"",bookerEmail:"",pushNotificationToken:""}),d=Object(l.a)(b,2),j=d[0],x=d[1],f=Object(r.useState)(!1),g=Object(l.a)(f,2),k=g[0],v=g[1],w=Object(r.useState)(!1),N=Object(l.a)(w,2),C=N[0],z=N[1],B=Object(r.useState)(!1),F=Object(l.a)(B,2),S=F[0],A=F[1];Object(r.useEffect)((function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();x(Object(O.a)(Object(O.a)({},j),{},{bookingDate:"".concat(r,"-0").concat(n,"-").concat(t),bookingTime:"18:00"}))}),[]);var T=function(){var e=Object(i.a)(c.a.mark((function e(){var t,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),t={_id:s._id,resaOpen:!s.resaOpen},r=localStorage.getItem("token-".concat(y)),e.next=5,P.updateConfig(t,r);case 5:(a=e.sent)&&200===a.data.status?(o(a.data.updatedConfig),n({success:!0,message:a.data.message}),v(!1)):(n({success:!1,message:"il y a eu un probl\xe8me"}),v(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u&&(j.pushNotificationToken=u),v(!0),e.next=5,P.postBooking(j);case 5:(r=e.sent)&&200===r.data.status?(v(!1),n({success:!0,message:r.data.message}),A(!1),z(!0)):(v(!1),n({success:!1,message:"il y eu un probl\xe9me lors de votre r\xe9servation veuillez reessayer"}),A(!0),z(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"home",children:[Object(m.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},children:[Object(m.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.baravin1755&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1",children:Object(m.jsx)("img",{style:{display:"inline-block",overflow:"hidden",borderRadius:"13px",width:"285px",height:"113px"},alt:"Disponible sur Google Play",src:"https://play.google.com/intl/en_us/badges/static/images/badges/fr_badge_web_generic.png"})}),Object(m.jsx)("a",{href:"https://apps.apple.com/fr/app/1755-r%C3%A9servation/id1581182779?itsct=apps_box_badge&itscg=30200",style:{display:"inline-block",overflow:"hidden",borderRadius:"13px",width:"250px",height:"83px"},children:Object(m.jsx)("img",{src:"https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/fr-fr?size=250x83&releaseDate=1628899200&h=e8c99d2716361f18893a828bf513b8ef",alt:"Download on the App Store",style:{borderRadius:"13px",width:"250px",height:"83px"}})})]}),Object(m.jsx)(h.a,{}),"isAdmin"===t&&Object(m.jsx)(se,{resaOpen:a,handleChangeResaOpen:T}),Object(m.jsx)(be,{loading:k}),!k&&a?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ue,{success:C,error:S}),!C&&!S&&a&&Object(m.jsx)(D.a,{animation:"fade down",duration:300,visible:!C||!S,children:Object(m.jsx)(le,{handleSubmit:_,setBooking:x,booking:j,loading:k})}),(S||C)&&Object(m.jsx)(ce,{handleEmptyForm:function(){x({bookerName:"",bookerNumber:"",bookerPhoneNumber:"",bookingDate:"",bookingTime:"",bookerEmail:""}),z(!1),A(!1),v(!1)}})]}):!k&&Object(m.jsx)(p.a,{as:"h1",className:"homeheader",children:"Les r\xe9servations sont d\xe9sactiv\xe9es pour le moment , revenez demain !"})]})}),je=(n(226),function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)({}),o=Object(l.a)(s,2),b=o[0],d=o[1],j=Object(r.useState)({}),p=Object(l.a)(j,2),f=p[0],g=p[1],O=Object(r.useState)(!1),v=Object(l.a)(O,2),w=v[0],N=v[1],C=Object(r.useState)([]),D=Object(l.a)(C,2),F=D[0],A=D[1],T=Object(r.useState)(""),_=Object(l.a)(T,2),E=_[0],R=_[1];return Object(r.useEffect)((function(){0!==Object.keys(b).length&&setTimeout((function(){d({})}),3e3)}),[b]),Object(r.useEffect)((function(){var e=localStorage.getItem("token-".concat(y));function t(){return(t=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,P.getConfig();case 3:(t=e.sent)&&200===t.data.status?(g(t.data.config),N(!1)):(N(!1),d({success:!1,message:"Impossible de r\xe9cup\xe9rer la configuration, contacter l'administrateur"}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e&&function(e,t){if(e){var n=Object(k.a)(e),r=n.user,a=n.exp,s=r.role;return!(Date.now()>1e3*a)&&(t(s),!0)}return!1}(e,a)?d({success:!0,message:"Re-Conn\xe9ct\xe9"}):z(a,d),function(){t.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){G.a.isNativePlatform()&&(K.a.requestPermissions().then((function(e){"granted"===e.receive&&K.a.register()})),K.a.addListener("registration",(function(e){R(e.value)})),K.a.addListener("registrationError",(function(e){})),K.a.addListener("pushNotificationReceived",(function(e){})),K.a.addListener("pushNotificationActionPerformed",(function(e){})))}),[]),Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)(B,{user:n,loading:w,setUser:a,setMessage:d}),Object(m.jsx)(h.a,{}),Object(m.jsx)(S,{message:b}),Object(m.jsxs)(u.d,{children:[Object(m.jsx)(u.b,{exact:!0,path:"/",children:Object(m.jsx)(de,{pushNotificationToken:E,setPushNotificationToken:R,user:n,message:b,setMessage:d,resaOpen:f.resaOpen,config:f,setConfig:g})}),Object(m.jsx)(u.b,{path:"/login",children:n?Object(m.jsx)(u.a,{to:"/bookings"}):Object(m.jsx)(M,{setUser:a,setMessage:d})}),Object(m.jsx)(u.b,{path:"/bookings",children:n?Object(m.jsx)(re,{setUser:a,pushNotificationToken:E,setMessage:d,bookings:F,setBookings:A}):Object(m.jsx)(u.a,{to:"/login"})})]}),Object(m.jsx)(h.a,{}),Object(m.jsx)(x,{})]})}),pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,249)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),s(e),o(e)}))};n(227);s.a.render(Object(m.jsx)(f.a,{basename:"/",children:Object(m.jsx)(je,{})}),document.getElementById("root")),pe()}},[[228,1,2]]]);
//# sourceMappingURL=main.a1090760.chunk.js.map