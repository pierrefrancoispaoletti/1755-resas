(this["webpackJsonp1755-resas"]=this["webpackJsonp1755-resas"]||[]).push([[0],{179:function(e,t,n){},198:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(63),s=n.n(a),c=(n(179),n(8)),o=n.n(c),i=n(11),u=n(21),l=n(12),b=n(234),d=n(238),j=n(96),p=n(45),f=n.n(p),h="https://le-1755.herokuapp.com",m="resas-1755",g=function e(){Object(j.a)(this,e)};g.postAdminRegistrationToken=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f()({method:"post",url:"".concat(h,"/api/bookings/registrationToken"),data:{registrationKey:n},headers:{Authorization:"Bearer "+t}});case 3:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),g.getAllBookings=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f()({method:"get",url:"".concat(h,"/api/bookings/allBookings"),headers:{Authorization:"Bearer "+t}});case 3:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),g.postBooking=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,f()({method:"post",url:"".concat(h,"/api/bookings/createBooking"),data:{booking:t}});case 5:if(!(n=e.sent)){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),g.updateBooking=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,f()({method:"post",url:"".concat(h,"/api/bookings/updateBooking"),data:{update:t},headers:{Authorization:"Bearer "+n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),g.deleteBooking=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,f()({method:"delete",url:"".concat(h,"/api/bookings/deleteBooking"),data:{update:t},headers:{Authorization:"Bearer "+n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),g.getConfig=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f()({method:"get",url:"".concat(h,"/api/config/getConfig")});case 3:if(!(t=e.sent)){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),g.updateConfig=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,f()({method:"post",url:"".concat(h,"/api/config/updateConfig"),data:{update:t},headers:{Authorization:"Bearer "+n}});case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),g.auth=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return n=t.email,r=t.password,e.prev=3,e.next=6,f()({method:"post",url:"".concat(h,"/auth/login"),data:{email:n,password:r}});case 6:if(!(a=e.sent)){e.next=9;break}return e.abrupt("return",a);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();var x=g,O=(n(198),n(239)),k=n(2),v=function(e){var t=e.resaOpen,n=e.handleChangeResaOpen;return Object(k.jsx)(O.a,{type:"checkbox",toggle:!0,checked:t,onChange:function(){return n()},label:t?"Reservations activ\xe9es":"R\xe9servations desactiv\xe9es"})},y=n(29),w=n(24),N=n(236),C=n(93),B=function(e){var t=e.handleEmptyForm;return Object(k.jsxs)(N.a,{color:"blue",icon:!0,type:"button",labelPosition:"left",onClick:function(){return t()},children:[Object(k.jsx)(C.a,{children:Object(k.jsx)(w.a,{style:{marginTop:"5px"},size:"2x",icon:y.f})}),"Recharger"]})},S=n(233),D=n(92),z=n(119),F=function(e,t,n){var r={};r[e.target.name]=e.target.value,t(Object(D.a)(Object(D.a)({},n),r))},A=function(e){var t=new Date(e).getDate()-(new Date).getDate();return 0===t?[0,"Aujourd'hui"]:1===t?[1,"Demain"]:t<0?[-1,"Il y \xe0 ".concat(Math.abs(t)," jours")]:t>1?[2,"Dans ".concat(t," jours")]:void 0},I=function(e,t,n){return e.filter((function(e){return t(e.bookingDate)[0]===n}))},_=function(e){var t=e.handleSubmit,n=e.booking,r=e.setBooking,a=e.loading;return Object(k.jsxs)(S.a,{onSubmit:t,children:[Object(k.jsxs)(S.a.Field,{required:!0,error:!n.bookerName,children:[Object(k.jsx)("label",{children:"Votre nom"}),Object(k.jsx)("input",{name:"bookerName",value:n.bookerName,autoComplete:"name",type:"text",onChange:function(e){return F(e,r,n)}})]}),Object(k.jsxs)(S.a.Field,{required:!0,error:!n.bookerEmail,children:[Object(k.jsx)("label",{children:"Votre Email"}),Object(k.jsx)("input",{name:"bookerEmail",value:n.bookerEmail,autoComplete:"email",type:"email",onChange:function(e){return F(e,r,n)}})]}),Object(k.jsxs)(S.a.Field,{required:!0,error:!n.bookerNumber,children:[Object(k.jsx)("label",{children:"Votre Nombre"}),Object(k.jsx)("input",{name:"bookerNumber",value:n.bookerNumber,step:1,type:"number",onChange:function(e){return F(e,r,n)}})]}),Object(k.jsxs)(S.a.Field,{required:!0,error:!n.bookingDate,children:[Object(k.jsx)("label",{children:"Date de votre reservation"}),Object(k.jsx)("input",{name:"bookingDate",value:n.bookingDate,type:"date",onChange:function(e){return F(e,r,n)}})]}),Object(k.jsxs)(S.a.Field,{required:!0,error:!n.bookingTime,children:[Object(k.jsx)("label",{children:"Heure de votre reservation"}),Object(k.jsx)("input",{name:"bookingTime",value:n.bookingTime,type:"time",onChange:function(e){return F(e,r,n)}})]}),Object(k.jsx)(S.a.Field,{children:Object(k.jsx)(N.a,{size:"massive",loading:a,disabled:a||!n.bookerName||!n.bookerNumber||!n.bookerEmail||!n.bookingDate||!n.bookingTime,color:"blue",type:"submit",content:"Je Reserve !"})})]})},E=function(e){var t=e.success,n=e.error;return Object(k.jsx)(d.a,{as:"h1",style:{background:t?"green":n?"red":"inherit"},children:t||n?t?"Votre r\xe9servation \xe0 \xe9t\xe9 effectu\xe9e avec succ\xe9s , vous allez recevoir un mail de confirmation":n?"Votre r\xe9servation \xe0 \xe9chou\xe9e, veuillez recommencer":"Reservez Votre table Maintenant !":"Reservez Votre table Maintenant !"})},R=function(e){var t=e.user,n=e.setMessage,a=e.resaOpen,s=e.config,c=e.setConfig,l=Object(r.useState)({bookerName:"",bookerNumber:"",bookingDate:"",bookingTime:"",bookerEmail:""}),j=Object(u.a)(l,2),p=j[0],f=j[1],h=Object(r.useState)(!1),g=Object(u.a)(h,2),O=g[0],y=g[1],w=Object(r.useState)(!1),N=Object(u.a)(w,2),C=N[0],S=N[1],D=Object(r.useState)(!1),z=Object(u.a)(D,2),F=z[0],A=z[1],I=function(){var e=Object(i.a)(o.a.mark((function e(){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),t={_id:s._id,resaOpen:!s.resaOpen},r=localStorage.getItem("token-".concat(m)),e.next=5,x.updateConfig(t,r);case 5:(a=e.sent)&&200===a.data.status?(c(a.data.updatedConfig),n({success:!0,message:a.data.message}),y(!1)):(n({success:!1,message:a.data.message||"il y a eu un probl\xe8me"}),y(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(!0),e.next=4,x.postBooking(p);case 4:(r=e.sent)&&200===r.data.status?(y(!1),n({success:!0,message:r.data.message}),A(!1),S(!0)):(y(!1),n({success:!1,message:"il y eu un probl\xe9me lors de votre r\xe9servation veuillez reessayer"}),A(!0),S(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"home",children:["isAdmin"===t&&Object(k.jsx)(v,{resaOpen:a,handleChangeResaOpen:I}),a?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(E,{success:C,error:F}),!C&&!F&&a&&Object(k.jsx)(b.a,{animation:"fade down",duration:300,visible:!C||!F,children:Object(k.jsx)(_,{handleSubmit:R,setBooking:f,booking:p,loading:O})}),(F||C)&&Object(k.jsx)(B,{handleEmptyForm:function(){f({bookerName:"",bookerNumber:"",bookingDate:"",bookingTime:"",bookerEmail:""}),S(!1),A(!1),y(!1)}})]}):Object(k.jsx)(d.a,{as:"h1",children:"Les r\xe9servations sont d\xe9sactiv\xe9es pour le moment , revenez demain !"})]})},V=n(137),T=n(232),P=(n(207),function(){return Object(k.jsxs)("div",{className:"footer",children:[Object(k.jsx)("div",{children:Object(k.jsxs)(d.a,{as:"h3",children:["Retrouvez nous sur :"," "]})}),Object(k.jsxs)("div",{className:"footer__icons",children:[Object(k.jsx)("a",{target:"_blank",href:"fb://profile/196458368600",rel:"noreferrer",children:Object(k.jsx)(w.a,{style:{color:"#3B5998",background:"white",borderRadius:"100%"},size:"3x",icon:V.a,pull:"left"})}),Object(k.jsx)("a",{target:"_blank",href:"https://www.instagram.com/1755baravin/",rel:"noreferrer",children:Object(k.jsx)(w.a,{style:{color:"#3F729B",borderRadius:"100%"},size:"3x",icon:V.b,pull:"right"})})]}),Object(k.jsx)(T.a,{}),Object(k.jsx)("div",{children:Object(k.jsxs)(d.a,{as:"h3",children:["Contactez nous !"," "]})}),Object(k.jsxs)("div",{className:"footer__icons",children:[Object(k.jsx)("a",{href:"mailto:christophemartinetti@baravin1755.com",children:Object(k.jsx)(w.a,{style:{"--fa-primary-color":"black","--fa-secondary-color":"white","--fa-secondary-opacity":.8},size:"3x",icon:y.c,pull:"left"})}),Object(k.jsx)("a",{href:"tel:0609542757",children:Object(k.jsx)(w.a,{style:{"--fa-primary-color":"firebrick","--fa-secondary-color":"black","--fa-primary-opacity":1,"--fa-secondary-opacity":1},size:"3x",icon:y.e,pull:"right"})})]}),Object(k.jsx)(T.a,{}),Object(k.jsxs)("div",{className:"footer__copyright",style:{color:"white"},children:["Copyright \xa9 ",Object(k.jsx)("a",{style:{color:"white"},href:"https://baravin1755.com",children:Object(k.jsx)("span",{children:"Le 1755 \xa0"})}),Object(k.jsx)("span",{children:" ".concat((new Date).getFullYear(),". ")})]}),Object(k.jsx)("div",{className:"footer__alvp",children:Object(k.jsxs)("a",{style:{color:"white",fontSize:"1em"},href:"mailto:pef@alvp-developments.com",children:["Made with",Object(k.jsx)(w.a,{className:"alvp__icon",color:"darkred",icon:y.d,size:"2x"}),"by ALVP-Developments Ajaccio"]})})]})}),L=n(66),M=(n(208),function(e){var t=e.user,n=e.loading;return Object(k.jsxs)("div",{className:"topappbar",children:[Object(k.jsx)(L.b,{to:"/",children:Object(k.jsx)("div",{className:"topappbar-image",children:Object(k.jsx)("img",{src:"./images/1755small.png",alt:"logo 1755"})})}),Object(k.jsxs)("div",{className:"topappbar-icons",children:[Object(k.jsx)(L.b,{to:"/login",children:Object(k.jsx)(N.a,{icon:!0,color:t?"green":"grey",circular:!0,disabled:n,loading:n,children:Object(k.jsx)(w.a,{size:"3x",icon:y.i})})}),"isAdmin"===t&&Object(k.jsx)(L.b,{to:"/bookings",children:Object(k.jsx)(N.a,{icon:!0,circular:!0,disabled:n,loading:n,children:Object(k.jsx)(w.a,{size:"3x",icon:y.a})})})]})]})}),q=(n(214),n(235)),J=function(e){var t=e.handleSubmitForm,n=e.credentials,r=e.setCredentials,a=e.loading;return Object(k.jsxs)(S.a,{onSubmit:t,children:[Object(k.jsxs)(S.a.Field,{required:!0,error:!n.email,children:[Object(k.jsx)("label",{htmlFor:"",children:"Email"}),Object(k.jsx)("input",{type:"email",name:"email",value:n.email,onChange:function(e){return F(e,r,n)}})]}),Object(k.jsxs)(S.a.Field,{required:!0,error:!n.password,children:[Object(k.jsx)("label",{htmlFor:"",children:"Mot de passe"}),Object(k.jsx)("input",{type:"password",name:"password",value:n.password,onChange:function(e){return F(e,r,n)}})]}),Object(k.jsx)(S.a.Field,{children:Object(k.jsx)(N.a,{size:"massive",loading:a,disabled:a||!n.email||!n.password,color:"blue",type:"submit",content:"Connexion"})})]})},K=function(e){var t=e.setUser,n=e.setMessage,a=Object(r.useState)({email:"",password:""}),s=Object(u.a)(a,2),c=s[0],l=s[1],b=Object(r.useState)(!1),d=Object(u.a)(b,2),j=d[0],p=d[1],f=function(){var e=Object(i.a)(o.a.mark((function e(r){var a,s,i,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),p(!0),e.next=4,x.auth(c);case 4:(a=e.sent)&&200===a.data.status?(s=a.data,i=s.role,u=s.message,l=s.token,n({success:!0,message:u}),p(!1),localStorage.setItem("token-".concat(m),l),t(i)):(p(!1),n({success:!1,message:a.data.message||"Identifiants incorrects"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"home",children:Object(k.jsx)(J,{handleSubmitForm:f,credentials:c,setCredentials:l,loading:j})})},U=n(57),H=n(123),Y=(n(215),function(e){var t=e.bookerName,n=e.bookerNumber,r=e.bookingDate,a=e.bookingTime,s=e.bookingValidatedByAdmin;return Object(k.jsxs)("div",{className:"booking",style:{border:s?"3px solid green":!1===s?"3px solid pink":""},children:[Object(k.jsx)(H.a,{color:s?"green":!1===s?"pink":"blue",ribbon:!0,children:s?"Accept\xe9e":!1===s?"Refus\xe9e":"Nouvelle"}),Object(k.jsx)("h2",{className:"booking-title",children:t}),Object(k.jsxs)("p",{className:"booking-date",children:[Object(k.jsxs)("span",{children:[A(r)[1],", Le "]}),Object(k.jsx)("span",{children:new Date(r).toLocaleString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),Object(k.jsxs)("p",{children:[" \xe0 ",a]})]}),Object(k.jsxs)("p",{className:"booking-number",children:["Pour : ",Object(k.jsx)("span",{children:n})," personnes"]})]})}),G=Object(r.memo)(Y),Q=(n(216),function(e){var t=e.booking,n=e.handleValidateBooking,r=e.handleDeleteBooking;return Object(k.jsxs)("div",{className:"bookingcontrols",children:[null===t.bookingValidatedByAdmin&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(N.a,{icon:!0,color:"green",circular:!0,onClick:function(){return n(t,!0)},children:Object(k.jsx)(w.a,{icon:y.b})}),Object(k.jsx)(N.a,{icon:!0,color:"pink",circular:!0,onClick:function(){return n(t,!1)},children:Object(k.jsx)(w.a,{icon:y.g})})]}),null!==t.bookingValidatedByAdmin&&Object(k.jsx)(N.a,{icon:!0,color:"red",circular:!0,onClick:function(){return r(t)},children:Object(k.jsx)(w.a,{icon:y.h})})]})}),W=Object(r.memo)(Q),X=(n(217),function(e){var t=e.setFilter,n=e.bookings;return Object(k.jsxs)("div",{className:"filterbuttons",children:[Object(k.jsxs)("div",{style:{position:"relative"},children:[Object(k.jsx)(N.a,{className:"filterbuttons-button",size:"mini",color:"red",content:"Jours Pr\xe9c\xe9dents",onClick:function(){t(-1)}}),Object(k.jsx)(H.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:I(n,A,-1).length})]}),Object(k.jsxs)("div",{style:{position:"relative"},children:[Object(k.jsx)(N.a,{className:"filterbuttons-button",size:"mini",color:"green",content:"Aujourd'hui",onClick:function(){t(0)}}),Object(k.jsx)(H.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:I(n,A,0).length})]}),Object(k.jsxs)("div",{style:{position:"relative"},children:[Object(k.jsx)(N.a,{className:"filterbuttons-button",size:"mini",color:"purple",content:"Demain",onClick:function(){t(1)}}),Object(k.jsx)(H.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:I(n,A,1).length})]}),Object(k.jsxs)("div",{style:{position:"relative"},children:[Object(k.jsx)(N.a,{className:"filterbuttons-button",size:"mini",color:"yellow",content:"Jours Suivants",onClick:function(){return t(2)}}),Object(k.jsx)(H.a,{style:{position:"absolute",top:"-11px",left:"3px"},color:"blue",circular:!0,children:I(n,A,2).length})]})]})}),Z=n(60),$=n(56),ee=(n(218),function(){return Object(k.jsx)("div",{className:"nobookings",children:Object(k.jsx)("p",{children:"D\xe9sol\xe9 , Il n'y a pas de reservations pour le moment :-("})})});function te(){return(te=Object(i.a)(o.a.mark((function e(t,n,r,a){var s,c,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.next=3,x.getAllBookings(a);case 3:(s=e.sent)&&200===s.data.status?(c=s.data,i=c.bookings,u=c.message,i.sort((function(e,t){return new Date(e.bookingDate)-new Date(t.bookingDate)})).sort((function(e,t){return(null===t.bookingValidatedByAdmin)-(null===e.bookingValidatedByAdmin)})),n(Object(U.a)(i)),t(!1),r({success:!0,message:u})):(t(!1),r({success:!1,message:"Il y a eu un probl\xe9me"}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.postAdminRegistrationToken(t,n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=function(e){var t=e.setMessage,n=e.bookings,a=e.setBookings,s=Object(r.useState)(!1),c=Object(u.a)(s,2),l=c[0],b=c[1],d=Object(r.useState)(0),j=Object(u.a)(d,2),p=j[0],f=j[1];Object(r.useEffect)((function(){if("android"===$.a.getPlatform()||"ios"===$.a.getPlatform()){var e=localStorage.getItem("token-".concat(m)),t=Object(z.a)(e).user;Z.a.requestPermissions().then((function(e){"granted"===e.receive&&Z.a.register()})),Z.a.addListener("registration",(function(n){t.registrationKey!==n.value&&function(e,t){ne.apply(this,arguments)}(e,n)})),Z.a.addListener("registrationError",(function(e){}))}}),[]),Object(r.useEffect)((function(){var e=localStorage.getItem("token-".concat(m));!function(e,t,n,r){te.apply(this,arguments)}(b,a,t,e)}),[]);var h=function(){var e=Object(i.a)(o.a.mark((function e(r,s){var c,i,u,l,d,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),c=localStorage.getItem("token-".concat(m)),r.bookingValidatedByAdmin=s,e.next=5,x.updateBooking(r,c);case 5:(i=e.sent)&&200===i.data.status?(u=i.data,l=u.updatedBooking,d=u.message,j=n.findIndex((function(e){return e._id===r._id})),n.splice(j,1),a([].concat(Object(U.a)(n),[l])),b(!1),t({success:!0,message:d})):(b(!1),t({success:!1,message:"Il y \xe0 eu un probl\xe8me"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(o.a.mark((function e(r){var s,c,i,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),s=localStorage.getItem("token-".concat(m)),e.next=4,x.deleteBooking(r,s);case 4:(c=e.sent)&&200===c.data.status?(i=c.data,u=i.deletedBooking,l=i.message,d=n.findIndex((function(e){return e._id===u._id})),n.splice(d,1),a(Object(U.a)(n)),b(!1),t({success:!0,message:l})):(b(!1),t({success:!1,message:"Il y \xe0 eu un probl\xe8me"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(X,{setFilter:f,bookings:n,filter:p}),n.length>0&&I(n,A,p).map((function(e){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(W,{booking:e,loading:l,handleValidateBooking:h,handleDeleteBooking:g}),Object(k.jsx)(G,Object(D.a)(Object(D.a)({},e),{},{loading:l})),Object(k.jsx)(T.a,{})]})})),0===I(n,A,p).length&&Object(k.jsx)(ee,{})]})},ae=Object(r.memo)(re),se=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)({}),c=Object(u.a)(s,2),d=c[0],j=c[1],p=Object(r.useState)({}),f=Object(u.a)(p,2),h=f[0],g=f[1],O=Object(r.useState)(!1),v=Object(u.a)(O,2),y=v[0],w=v[1],N=Object(r.useState)([]),C=Object(u.a)(N,2),B=C[0],S=C[1];return Object(r.useEffect)((function(){0!==Object.keys(d).length&&setTimeout((function(){j({})}),3e3)}),[d]),Object(r.useEffect)((function(){var e=localStorage.getItem("token-".concat(m));function t(){return(t=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,x.getConfig();case 3:(t=e.sent)&&200===t.data.status?(g(t.data.config),w(!1)):(w(!1),j({success:!1,message:t.data.message||"Impossible de r\xe9cup\xe9rer la configuration, contacter l'administrateur"}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e&&function(e,t){if(e){var n=Object(z.a)(e),r=n.user,a=n.exp,s=r.role;return!(Date.now()>1e3*a)&&(t(s),!0)}return!1}(e,a)?j({success:!0,message:"Re-Conn\xe9ct\xe9"}):localStorage.removeItem("token-".concat(m)),function(){t.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){"android"!==$.a.getPlatform()&&"ios"!==$.a.getPlatform()||(Z.a.addListener("pushNotificationReceived",(function(e){})),Z.a.addListener("pushNotificationActionPerformed",(function(e){})))}),[]),Object(k.jsxs)("div",{className:"app",children:[Object(k.jsx)(M,{user:n,loading:y}),Object(k.jsx)(T.a,{}),Object(k.jsx)(b.a,{animation:"jiggle",duration:500,visible:Object.keys(d).length>0,children:Object(k.jsx)(q.a,{style:{position:"fixed",top:15,zIndex:"1000",width:"100%"},hidden:0===Object.keys(d).length,success:!!d.success,error:!d.success,children:d.message})}),Object(k.jsxs)(l.d,{children:[Object(k.jsx)(l.b,{exact:!0,path:"/",children:Object(k.jsx)(R,{user:n,message:d,setMessage:j,resaOpen:h.resaOpen,config:h,setConfig:g})}),Object(k.jsx)(l.b,{path:"/login",children:n?Object(k.jsx)(l.a,{to:"/bookings"}):Object(k.jsx)(K,{setUser:a,setMessage:j})}),Object(k.jsx)(l.b,{path:"/bookings",children:n?Object(k.jsx)(ae,{setMessage:j,bookings:B,setBookings:S}):Object(k.jsx)(l.a,{to:"/login"})})]}),Object(k.jsx)(T.a,{}),Object(k.jsx)(P,{})]})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,240)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};n(219);s.a.render(Object(k.jsx)(L.a,{basename:"/",children:Object(k.jsx)(se,{})}),document.getElementById("root")),ce()}},[[220,1,2]]]);
//# sourceMappingURL=main.7da5b159.chunk.js.map